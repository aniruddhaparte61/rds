{ 
"Parameters": {
    "DBName": {
      "Description" : "The database name",
      "Type": "String"
    },
	
    "DBUser": {
      "Description" : "The database admin account username",
      "Type": "String"
    },

    "DBPassword": {
      "Description" : "The database admin account password",
      "Type": "String"
     },
	
    "DBInstanceIdentifier": {
      "Description" : "Select Zone",
      "Type": "String"
	}
  },
"Resources": {
        "MyDB": {
            "Type": "AWS::RDS::DBInstance",
            "Properties": {
                "AllocatedStorage": "8" ,
                "AvailabilityZone": "us-east-1a",
                "DBInstanceClass": "db.m4.large",
                "DBInstanceIdentifier": { "Ref" : "DBInstanceIdentifier" },
                "DBName": { "Ref" : "DBName" },
                "DeleteAutomatedBackups": true,
                "Engine": "MySQL",
		"EngineVersion" : "5.7.22",
                "MasterUsername": { "Ref" : "DBUser" },
                "MasterUserPassword": { "Ref" : "DBPassword" },
                "Port": "3306",
                "PubliclyAccessible": true,
				"Tags" : [{ "Key"  : "Name", "Value" : "Master Database" }],
				"VPCSecurityGroups" : [ { "Fn::GetAtt": [ "DBEC2SecurityGroup", "GroupId" ]}]
        }
		},
		
		"DBEC2SecurityGroup": {
					"Type": "AWS::EC2::SecurityGroup",
					"Properties" : {
							"GroupDescription": "Open database for access",
							"SecurityGroupIngress" : [{
										"IpProtocol" : "tcp",
										"FromPort" : "3306",
										"ToPort" : "3306",
										"CidrIp" : "202.189.245.70/32"
        }]
      }
    }
		 
    }
}
